/* 
mzMl v1.0.0
A collection of TypeScript-based ML helpers.
https://github.com/mzusin/mz-ml
Copyright (c) 2023-present, Miriam Zusin          
*/
var c=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var g=(s,t,i)=>t in s?c(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var G=(s,t)=>{for(var i in t)c(s,i,{get:t[i],enumerable:!0})},B=(s,t,i,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of d(t))!f.call(s,n)&&n!==i&&c(s,n,{get:()=>t[n],enumerable:!(e=u(t,n))||e.enumerable});return s};var D=s=>B(c({},"__esModule",{value:!0}),s);var p=(s,t,i)=>(g(s,typeof t!="symbol"?t+"":t,i),i);var M={};G(M,{LinearRegression:()=>m});module.exports=D(M);var m=class{constructor(t){p(this,"options");p(this,"m");p(this,"b");this.options=t,this.m=0,this.b=0}shuffle(){for(let t=this.options.points.length-1;t>0;t--){let i=Math.floor(Math.random()*(t+1));[this.options.points[t],this.options.points[i]]=[this.options.points[i],this.options.points[t]]}}gradientDescent(){let t=0,i=0,e=this.options.points.length;for(let h=0;h<e;h++){let[r,l]=this.options.points[h],b=this.m*r+this.b,a=-2/e*(l-b);t+=r*a,i+=a}let n=this.m-this.options.learningRate*t,o=this.b-this.options.learningRate*i;return[n,o]}miniBatchGradientDescent(t){let i=0,e=0,n=t.length;for(let[r,l]of t){let b=this.m*r+this.b,a=l-b;i+=-2*r*a,e+=-2*a}let o=this.m-this.options.learningRate/n*i,h=this.b-this.options.learningRate/n*e;return[o,h]}train(){var i;let t=this.options.optimization===2?(i=this.options.batchSize)!=null?i:this.options.points.length:1;for(let e=0;e<this.options.epochs;e++)if(this.options.shuffle&&this.shuffle(),this.options.optimization===1||this.options.optimization===2)for(let n=0;n<this.options.points.length;n+=t){let o=this.options.points.slice(n,n+t),[h,r]=this.miniBatchGradientDescent(o);typeof this.options.epochsCallback=="function"&&this.options.epochsCallback(e,this.options.epochs,h,r),this.m=h,this.b=r}else{let[n,o]=this.gradientDescent();this.options.epochsCallback&&typeof this.options.epochsCallback=="function"&&this.options.epochsCallback(e,this.options.epochs,n,o),this.m=n,this.b=o}return[this.m,this.b]}predict(t){return this.m*t+this.b}};0&&(module.exports={LinearRegression});
//# sourceMappingURL=mz-ml.node.cjs.map
