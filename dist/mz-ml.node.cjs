/* 
mzMl v1.0.0
A collection of TypeScript-based ML helpers.
https://github.com/mzusin/mz-ml
Copyright (c) 2023-present, Miriam Zusin          
*/
var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var G=Object.prototype.hasOwnProperty;var B=(e,t,i)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var M=(e,t)=>{for(var i in t)l(e,i,{get:t[i],enumerable:!0})},k=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of g(t))!G.call(e,s)&&s!==i&&l(e,s,{get:()=>t[s],enumerable:!(n=m(t,s))||n.enumerable});return e};var D=e=>k(l({},"__esModule",{value:!0}),e);var u=(e,t,i)=>(B(e,typeof t!="symbol"?t+"":t,i),i);var R={};M(R,{LinearRegression:()=>b});module.exports=D(R);var b=class{constructor(t){u(this,"options");u(this,"m");u(this,"b");this.options=t,this.m=0,this.b=0}shuffle(){for(let t=this.options.points.length-1;t>0;t--){let i=Math.floor(Math.random()*(t+1));[this.options.points[t],this.options.points[i]]=[this.options.points[i],this.options.points[t]]}}gradientDescent(t,i){let n=0,s=0,o=this.options.points.length;for(let r=0;r<o;r++){let[c,p]=this.options.points[r],f=t*c+i,d=-2/o*(p-f);n+=c*d,s+=d}let h=t-this.options.learningRate*n,a=i-this.options.learningRate*s;return[h,a]}stochasticGradientDescent(t,i){let n=this.m*t+this.b,s=i-n,o=-2*t*s,h=-2*s,a=this.m-this.options.learningRate*o,r=this.b-this.options.learningRate*h;return[a,r]}miniBatchGradientDescent(t){let i=0,n=0,s=t.length;for(let[a,r]of t){let c=this.m*a+this.b,p=r-c;i+=-2*a*p,n+=-2*p}let o=this.m-this.options.learningRate/s*i,h=this.b-this.options.learningRate/s*n;return[o,h]}train(){var i;let t=(i=this.options.batchSize)!=null?i:this.options.points.length;for(let n=0;n<this.options.epochs;n++)switch(this.options.optimization){case 1:{this.options.shuffle&&this.shuffle();for(let[s,o]of this.options.points){let[h,a]=this.stochasticGradientDescent(s,o);typeof this.options.epochsCallback=="function"&&this.options.epochsCallback(n,this.options.epochs,h,a),this.m=h,this.b=a}break}case 2:{this.options.shuffle&&this.shuffle();for(let s=0;s<this.options.points.length;s+=t){let o=this.options.points.slice(s,s+t),[h,a]=this.miniBatchGradientDescent(o);typeof this.options.epochsCallback=="function"&&this.options.epochsCallback(n,this.options.epochs,h,a),this.m=h,this.b=a}break}default:{let[s,o]=this.gradientDescent(this.m,this.b);this.options.epochsCallback&&typeof this.options.epochsCallback=="function"&&this.options.epochsCallback(n,this.options.epochs,s,o),this.m=s,this.b=o;break}}return[this.m,this.b]}predict(t){return this.m*t+this.b}};0&&(module.exports={LinearRegression});
//# sourceMappingURL=mz-ml.node.cjs.map
