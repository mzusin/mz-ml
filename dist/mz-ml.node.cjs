/* 
mzMl v1.0.0
A collection of TypeScript-based ML helpers.
https://github.com/mzusin/mz-ml
Copyright (c) 2023-present, Miriam Zusin          
*/
var h=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var g=(i,t,e)=>t in i?h(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var S=(i,t)=>{for(var e in t)h(i,e,{get:t[e],enumerable:!0})},B=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of f(t))!d.call(i,s)&&s!==e&&h(i,s,{get:()=>t[s],enumerable:!(n=m(t,s))||n.enumerable});return i};var D=i=>B(h({},"__esModule",{value:!0}),i);var a=(i,t,e)=>(g(i,typeof t!="symbol"?t+"":t,e),e);var G={};S(G,{LinearRegression:()=>c});module.exports=D(G);var c=class{constructor(t){a(this,"options");a(this,"m");a(this,"b");this.options=t,this.m=0,this.b=0}shuffle(){for(let t=this.options.points.length-1;t>0;t--){let e=Math.floor(Math.random()*(t+1));[this.options.points[t],this.options.points[e]]=[this.options.points[e],this.options.points[t]]}}gradientDescent(t){let e=0,n=0,s=t.length;for(let[p,l]of t){let b=this.m*p+this.b,u=l-b;e+=-2*p*u,n+=-2*u}let o=this.m-this.options.learningRate/s*e,r=this.b-this.options.learningRate/s*n;return[o,r]}getBatchSize(){var t;switch(this.options.optimization){case 1:return 1;case 2:return(t=this.options.batchSize)!=null?t:this.options.points.length;default:return this.options.points.length}}train(){let t=this.getBatchSize();for(let e=0;e<this.options.epochs;e++){this.options.shuffle&&this.shuffle();for(let n=0;n<this.options.points.length;n+=t){let s=this.options.points.slice(n,n+t),[o,r]=this.gradientDescent(s);typeof this.options.epochsCallback=="function"&&this.options.epochsCallback(e,this.options.epochs,o,r),this.m=o,this.b=r}}return[this.m,this.b]}predict(t){return this.m*t+this.b}};0&&(module.exports={LinearRegression});
//# sourceMappingURL=mz-ml.node.cjs.map
